(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bfa954f0"],{"120d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-container"},[a("div",{staticClass:"card-header"},[a("div",{staticClass:"title"},[e._v("节点标签")]),a("div",{staticClass:"edit",on:{click:function(t){e.dialogVisible=!0}}},[a("svg-icon",{attrs:{"icon-class":"edit"}})],1)]),a("div",{staticClass:"card-body"},e._l(e.labelList,(function(t,i){return a("el-tag",{staticClass:"my-tag"},[e._v(e._s(t["key"])+":"+e._s(t["value"]))])})),1),a("el-dialog",{attrs:{title:"节点标签管理",visible:e.dialogVisible,width:"35%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e._l(e.labelList,(function(t,i){return a("el-row",{key:i},[a("el-col",{attrs:{span:12}},[a("el-row",{staticStyle:{"text-align":"center"}},[a("el-col",{staticStyle:{"line-height":"30px"},attrs:{span:6}},[e._v(" 标签键： ")]),a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{disabled:t["disabled"]},model:{value:t["key"],callback:function(a){e.$set(t,"key",a)},expression:"item['key']"}})],1)],1)],1),a("el-col",{staticStyle:{"padding-left":"10px","text-align":"center"},attrs:{span:8}},[a("el-row",[a("el-col",{staticStyle:{"line-height":"30px"},attrs:{span:4}},[e._v(" 值： ")]),a("el-col",{attrs:{span:20}},[a("el-input",{model:{value:t["value"],callback:function(a){e.$set(t,"value",a)},expression:"item['value']"}})],1)],1)],1),a("el-col",{staticStyle:{"text-align":"center","line-height":"40px"},attrs:{span:4}},["add"==t["status"]?a("i",{staticClass:"el-icon-check",on:{click:function(t){return e.addLabel(i)}}}):a("i",{staticClass:"el-icon-close",on:{click:function(t){return e.deleteLabel(i)}}})])],1)})),a("div",{staticStyle:{margin:"10px 35px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:function(t){return e.addViewLabel()}}},[e._v("添加标签")])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("关 闭")])],1)],2)],1)},s=[],n=(a("a434"),a("ed87"),a("5c96")),l={name:"LabelsCard",props:["labels"],data:function(){return{dialogVisible:!1,labelList:[]}},watch:{labels:function(e){for(var t in e)this.labelList.push({disabled:!0,key:t,value:e[t],status:"del"})}},methods:{addLabel:function(e){var t=this.labelList[e];if(this.labels.hasOwnProperty(t["key"]))Object(n["Message"])({message:"标签键已存在",type:"error",duration:5e3});else if(""!==t["key"]){var a={label_key:t["key"],label_value:t["value"]};this.$store.dispatch("edge-node/createNodeLabel",a),this.labelList[e]["disabled"]="true",this.labelList[e]["status"]="del",Object(n["Message"])({message:"标签添加成功！",type:"success",duration:5e3})}else Object(n["Message"])({message:"标签键不能为空",type:"error",duration:5e3})},addViewLabel:function(){this.labelList.push({disabled:!1,key:"",value:"",status:"add"})},deleteLabel:function(e){var t=this.labelList[e],a={label_key:t["key"]};this.$store.dispatch("edge-node/deleteNodeLabel",a),this.labelList.splice(e,1),Object(n["Message"])({message:"标签删除成功！",type:"success",duration:5e3})}}},r=l,c=(a("1aa2"),a("2877")),o=Object(c["a"])(r,i,s,!1,null,"f7d0bec6",null);t["a"]=o.exports},"1aa2":function(e,t,a){"use strict";a("b0a0")},"2bcd":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-container"},[a("div",{staticClass:"card-header"},[e._v(" 节点资源使用情况 ")]),a("div",{staticClass:"card-body"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("usage-chart",{attrs:{name:"CPU",unit:"n",scale:1e3,metrics:JSON.stringify(e.metrics.cpu),id:e.chartName1,"class-name":e.chartName1,height:"400px",width:"100%"}})],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("usage-chart",{attrs:{name:"内存",unit:"Mi",scale:1024,metrics:JSON.stringify(e.metrics.memory),id:e.chartName2,"class-name":e.chartName2,height:"400px",width:"100%"}})],1)])],1)],1)])},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width},attrs:{id:e.id}})},l=[],r=(a("a9e3"),a("b0c0"),a("313e")),c=a.n(r),o=a("f42c"),d={name:"UsageChart",mixins:[o["a"]],props:{scale:{type:Number,default:1},unit:{type:String,default:null},name:{type:String,default:null},metrics:{type:String,default:null},className:{type:String,default:"chart"},id:{type:String,default:"chart"},width:{type:String,default:"200px"},height:{type:String,default:"200px"}},data:function(){return{chart:null,usage:0}},mounted:function(){},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},watch:{metrics:{handler:function(e){this.initChart(e)}}},methods:{initChart:function(e){e=JSON.parse(e);var t=Math.round(e.usage/e.allocatable*1e4)/100+"%";this.chart=c.a.init(document.getElementById(this.id)),console.log(this.scale),this.chart.setOption({title:{text:this.name+": "+Math.round(e.usage/this.scale)+this.unit+" / "+Math.round(e.allocatable/this.scale)+this.unit,x:"center",y:"bottom",textStyle:{color:"#000",fontSize:20,fontWeight:"normal",fontFamily:"Microsoft YaHei"}},grid:{left:"5%",right:"5%"},series:[{name:"资源使用",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,labelLine:{show:!0},label:{normal:{show:!0,position:"center",formatter:function(e){return t},textStyle:{fontSize:"30",color:"#333"}}},data:[{value:e.usage,name:"已使用"},{value:e.allocatable-e.usage,name:"未使用"}],itemStyle:{normal:{color:function(e){return"已使用"===e.name?"#409EFF":"#DCDCDC"}}}}]})}}},u=d,h=a("2877"),b=Object(h["a"])(u,n,l,!1,null,"7ab4fb12",null),f=b.exports,p={name:"NodeUsageCard",components:{UsageChart:f},props:["metrics"],data:function(){return{chartName1:"chart1",chartName2:"chart2"}}},m=p,g=Object(h["a"])(m,i,s,!1,null,"a58d5672",null);t["a"]=g.exports},"817f":function(e,t,a){"use strict";a("b4ae")},a05b:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("usage-card"),a("labels-card",{attrs:{labels:e.labels}})],1)},s=[],n=(a("99af"),a("120d")),l=a("2bcd"),r={name:"Detail",components:{LabelsCard:n["a"],UsageCard:l["a"]},data:function(){return{id:this.$route.params.id,labels:["beta.kubernetes.io/arch=arm64","beta.kubernetes.io/os=linux"]}},created:function(){var e="应用详情";this.tempRoute=Object.assign({},this.$route),this.setPageTitle(e),this.setTagsViewTitle(e)},methods:{setPageTitle:function(e){document.title="".concat(e," - ").concat(this.id)},setTagsViewTitle:function(e){var t=Object.assign({},this.tempRoute,{title:"".concat(e,"-").concat(this.id)});this.$store.dispatch("tagsView/updateVisitedView",t)}}},c=r,o=(a("817f"),a("2877")),d=Object(o["a"])(c,i,s,!1,null,"291c2d74",null);t["default"]=d.exports},b0a0:function(e,t,a){},b4ae:function(e,t,a){},f42c:function(e,t,a){"use strict";var i=a("ed08");t["a"]={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){this.initListener()},activated:function(){this.$_resizeHandler||this.initListener(),this.resize()},beforeDestroy:function(){this.destroyListener()},deactivated:function(){this.destroyListener()},methods:{$_sidebarResizeHandler:function(e){"width"===e.propertyName&&this.$_resizeHandler()},initListener:function(){var e=this;this.$_resizeHandler=Object(i["c"])((function(){e.resize()}),100),window.addEventListener("resize",this.$_resizeHandler),this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},destroyListener:function(){window.removeEventListener("resize",this.$_resizeHandler),this.$_resizeHandler=null,this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)},resize:function(){var e=this.chart;e&&e.resize()}}}}}]);