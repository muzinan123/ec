(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39775dc4"],{"4f34":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"form",staticStyle:{width:"30%"},attrs:{rules:e.rules,model:e.form,"label-width":"130px"}},[r("el-form-item",{attrs:{prop:"name.value"}},[r("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.form.name.label.title)+" "),r("el-tooltip",{attrs:{placement:"right"}},[r("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(e.form.name.label.desc)+" ")]),r("i",{staticClass:"el-icon-question"})])],1),r("el-input",{staticStyle:{width:"80%"},attrs:{disabled:!0,placeholder:e.form.name.placeholder},model:{value:e.form.name.value,callback:function(t){e.$set(e.form.name,"value",t)},expression:"form.name.value"}})],1),e._l(e.form.properties,(function(t,a){return r("el-form-item",{key:a,attrs:{prop:"properties["+a+"].value"}},[r("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(t.label.title+(a+1))+" "),r("el-tooltip",{attrs:{placement:"right"}},[r("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(t.label.desc)+" ")]),r("i",{staticClass:"el-icon-question"})])],1),r("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:t.placeholder},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"item.value"}}),r("div",{staticClass:"property-container"},[a==e.form.properties.length-1?r("i",{staticClass:"el-icon-circle-plus",on:{click:e.addPropView}}):r("i",{staticClass:"el-icon-remove",on:{click:function(t){return e.removePropView(a)}}})])],1)})),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("立即更新")])],1)],2)],1)},i=[],s=(r("b0c0"),r("d3b7"),r("159b"),r("e9c4"),r("a434"),r("5c96")),o={label:{title:"字段属性",desc:"该模板定义的字段"},value:"",placeholder:"请输入设备模板字段属性"},l={required:!0,message:"请输入设备模板字段属性",trigger:"blur"},n={name:"DeviceModelUpdate",data:function(){return{form:{name:{label:{title:"名称",desc:"设备模板名称"},value:"",placeholder:"请输入设备模板名称"},properties:[]},rules:{"name.value":[{required:!0,message:"请输入模板名称",trigger:"blur"}],"properties[0].value":[l]}}},created:function(){this.init()},methods:{init:function(){var e=this;this.$store.dispatch("edge-device/getDeviceModelItem").then((function(t){e.form.name.value=t.metadata.name,t.spec.properties.forEach((function(t,r){var a=JSON.parse(JSON.stringify(o));a["value"]=t.name,e.form.properties.push(a)}))}))},removePropView:function(e){this.form.properties.splice(e,1)},addPropView:function(){this.form.properties.push(JSON.parse(JSON.stringify(o)));var e="properties["+(this.form.properties.length-1)+"].value";this.rules[e]=[l]},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r=[];t.form.properties.forEach((function(e,t){r.push(e.value)}));var a={name:t.form.name.value,properties:r};t.$store.dispatch("edge-device/updateDeviceModel",a).then((function(){Object(s["Message"])({message:"设备模板更新成功",type:"success",duration:5e3}),t.$router.push({path:"/edge-device/device-model"})}))}))}}},c=n,u=(r("668b"),r("2877")),p=Object(u["a"])(c,a,i,!1,null,"92c1bc3a",null);t["default"]=p.exports},"668b":function(e,t,r){"use strict";r("c9f4")},c9f4:function(e,t,r){},e9c4:function(e,t,r){var a=r("23e7"),i=r("d066"),s=r("d039"),o=i("JSON","stringify"),l=/[\uD800-\uDFFF]/g,n=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,u=function(e,t,r){var a=r.charAt(t-1),i=r.charAt(t+1);return n.test(e)&&!c.test(i)||c.test(e)&&!n.test(a)?"\\u"+e.charCodeAt(0).toString(16):e},p=s((function(){return'"\\udf06\\ud834"'!==o("\udf06\ud834")||'"\\udead"'!==o("\udead")}));o&&a({target:"JSON",stat:!0,forced:p},{stringify:function(e,t,r){var a=o.apply(null,arguments);return"string"==typeof a?a.replace(l,u):a}})}}]);