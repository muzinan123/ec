(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-578d915f"],{2277:function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:function(t){e.dialogVisible2create=!0}}},[e._v(" 创建路由节点 "),i("i",{staticClass:"el-icon-circle-plus"})])],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,fit:""}},[i("el-table-column",{attrs:{prop:"name",label:"节点名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[i("svg-icon",{staticStyle:{color:"green","margin-right":"10px"},attrs:{"icon-class":"status"}}),i("a",{staticStyle:{color:"blue"},on:{click:function(t){return e.showDetail(l.name)}}},[e._v(" "+e._s(l.name)+" ")])]}}])}),i("el-table-column",{attrs:{prop:"age",label:"创建时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:l.createTime,placement:"right-start"}},[i("el-button",{staticStyle:{border:"none",outline:"none"}},[e._v(e._s(e.dateTimeFormat(l.createTime))+" "),i("i",{staticClass:"el-icon-info"})])],1)]}}])}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[i("el-dropdown",{staticStyle:{cursor:"pointer"},attrs:{placement:"bottom-start"}},[i("span",{staticClass:"el-dropdown-link"},[i("svg-icon",{attrs:{"icon-class":"3points-vertical"}})],1),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(t){return e.showDetail(l.name)}}},[e._v(" 查看 ")]),i("el-dropdown-item",{nativeOn:{click:function(t){return e.deleteRuleEndPointView(l.name)}}},[e._v("删除")]),i("el-dropdown-item",[e._v("更新")])],1)],1)]}}])})],1),i("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",[e._v("删除路由节点后无法恢复，确定删除？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.deleteRuleEndPoint}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"路由规则详情",visible:e.dialogVisible2detail,width:"30%"},on:{"update:visible":function(t){e.dialogVisible2detail=t}}},[i("pre",[e._v("      "+e._s(e.detailContent)+"\n    ")])]),i("el-dialog",{attrs:{title:"创建路由节点",visible:e.dialogVisible2create,width:"40%"},on:{"update:visible":function(t){e.dialogVisible2create=t}}},[i("create-dialog",{on:{reload:e.reload}})],1)],1)},a=[],n=(i("e9c4"),i("d3b7"),i("159b"),i("b0c0"),i("ed08")),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{ref:"form",attrs:{model:e.form}},[e._l(e.form.properties,(function(t,l){return i("el-form-item",{key:l,attrs:{rules:t.rules,prop:"properties["+l+"].value"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(t.label.title)+" ")]),"text"==t.type?i("el-input",{attrs:{placeholder:t.placeholder},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}}):"options"==t.type?i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}},e._l(t.options,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1):i("el-input",{attrs:{type:"textarea"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})],1)})),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("立即创建")])],1)],2)],1)},r=[],s=i("5c96"),u={name:"CreateRuleendpointDailog",data:function(){return{form:{properties:[{name:"name",type:"text",label:{title:"路由节点名称",desc:"路由节点名称"},value:"",rules:[{required:!0,message:"请输入路由节点名称",trigger:"blur"}],placeholder:"请输入路由节点名称"},{name:"rule_endpoint_type",type:"options",label:{title:"路由节点类型",desc:"路由节点类型"},options:["rest","servicebus","eventbus"],value:"",rules:[{required:!0,message:"请输入路由节点类型",trigger:"blur"}],placeholder:"请输入路由节点类型"},{name:"properties",type:"textarea",label:{title:"路由节点配置信息",desc:"路由节点配置信息"},value:"",rules:[],placeholder:"请输入路由节点配置信息"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var i={};t.form.properties.forEach((function(e,t){try{i[e["name"]]=JSON.parse(e["value"])}catch(l){i[e["name"]]=e["value"]}}));var l=t;t.$store.dispatch("edge-router/createRuleEndPoint",i).then((function(e){Object(s["Message"])({message:"路由节点创建成功",type:"success",duration:5e3}),l.$emit("reload")}))}))}}},c=u,d=i("2877"),p=Object(d["a"])(c,o,r,!1,null,"71cc3ad9",null),f=p.exports,m={name:"RuleEndPoint",components:{CreateDialog:f},data:function(){return{dialogVisible2detail:!1,dialogVisible2create:!1,dialogVisible:!1,detailContent:null,list:null}},created:function(){this.getList()},methods:{dateTimeFormat:n["b"],reload:function(){this.dialogVisible2create=!1,this.getList()},deleteRuleEndPoint:function(){var e=this;this.$store.dispatch("edge-router/deleteRuleEndPoint").then((function(){Object(s["Message"])({message:"删除路由节点规则成功",type:"success",duration:5e3}),e.dialogVisible=!1,e.getList()}))},deleteRuleEndPointView:function(e){this.$store.dispatch("edge-router/setRuleEndPointName",e),this.dialogVisible=!0},showDetail:function(e){var t=this;this.dialogVisible2detail=!0,this.$store.dispatch("edge-router/setRuleEndPointName",e),this.$store.dispatch("edge-router/getRuleEndPointItem").then((function(e){t.detailContent=JSON.stringify(e,null,4)}))},getList:function(){var e=this;this.$store.dispatch("edge-router/getRuleEndPointList").then((function(t){var i=[];t.forEach((function(e,t){i.push({name:e.metadata.name,createTime:e.metadata.creationTimestamp})})),e.list=i}))}}},v=m,b=(i("942e"),Object(d["a"])(v,l,a,!1,null,"36538e3e",null));t["default"]=b.exports},"942e":function(e,t,i){"use strict";i("e44a")},e44a:function(e,t,i){},e9c4:function(e,t,i){var l=i("23e7"),a=i("d066"),n=i("d039"),o=a("JSON","stringify"),r=/[\uD800-\uDFFF]/g,s=/^[\uD800-\uDBFF]$/,u=/^[\uDC00-\uDFFF]$/,c=function(e,t,i){var l=i.charAt(t-1),a=i.charAt(t+1);return s.test(e)&&!u.test(a)||u.test(e)&&!s.test(l)?"\\u"+e.charCodeAt(0).toString(16):e},d=n((function(){return'"\\udf06\\ud834"'!==o("\udf06\ud834")||'"\\udead"'!==o("\udead")}));o&&l({target:"JSON",stat:!0,forced:d},{stringify:function(e,t,i){var l=o.apply(null,arguments);return"string"==typeof l?l.replace(r,c):l}})}}]);