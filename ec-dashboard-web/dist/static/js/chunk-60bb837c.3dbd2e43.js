(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60bb837c"],{"6c76":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("router-link",{attrs:{to:"/edge-app/create"}},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary"}},[t._v(" 创建应用 "),a("i",{staticClass:"el-icon-circle-plus"})])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,fit:""}},[a("el-table-column",{attrs:{prop:"name",label:"NAME",width:"320"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("svg-icon",{staticStyle:{"margin-right":"10px"},style:{color:0===i.status?"green":"red"},attrs:{"icon-class":"status"}}),a("a",{staticStyle:{color:"blue"},on:{click:function(e){return t.showAppDetail(i.name)}}},[t._v(" "+t._s(i.name)+" ")])]}}])}),a("el-table-column",{attrs:{label:"镜像",width:"320"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return t._l(i.images,(function(e,i){return a("p",[t._v(t._s(e))])}))}}])}),a("el-table-column",{attrs:{label:"标签"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return t._l(i.labels,(function(e,i,n){return a("el-tag",{staticClass:"my-tag"},[t._v(t._s(i)+":"+t._s(e))])}))}}])}),a("el-table-column",{attrs:{prop:"node",label:"节点",width:"150"}}),a("el-table-column",{attrs:{prop:"age",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:i.createTime,placement:"right-start"}},[a("el-button",{staticStyle:{border:"none",outline:"none"}},[t._v(t._s(t.dateTimeFormat(i.createTime))+" "),a("i",{staticClass:"el-icon-info"})])],1)]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-dropdown",{staticStyle:{cursor:"pointer"},attrs:{placement:"bottom-start"}},[a("span",{staticClass:"el-dropdown-link"},[a("svg-icon",{attrs:{"icon-class":"3points-vertical"}})],1),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(e){return t.showAppDetail(i.name)}}},[t._v("查看")]),a("el-dropdown-item",{nativeOn:{click:function(e){return t.showDeleteApp(i.name)}}},[t._v("删除")])],1)],1)]}}])})],1),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("删除以后应用无法恢复，确定删除？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.deleteApp}},[t._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"应用详情",visible:t.dialogVisible2detail,width:"30%"},on:{"update:visible":function(e){t.dialogVisible2detail=e}}},[a("pre",[t._v("      "+t._s(t.detailContent)+"\n    ")])])],1)},n=[],s=(a("e9c4"),a("d3b7"),a("159b"),a("b0c0"),a("ed08")),l=a("5c96"),o={name:"Applications",data:function(){return{dialogVisible:!1,dialogVisible2detail:!1,detailContent:"",list:null}},created:function(){this.getList()},methods:{dateTimeFormat:s["b"],showAppDetail:function(t){var e=this;this.dialogVisible2detail=!0,this.$store.dispatch("edge-app/setAppName",t),this.$store.dispatch("edge-app/getAppItem").then((function(t){e.detailContent=JSON.stringify(t,null,4)}))},showDeleteApp:function(t){this.dialogVisible=!0,this.$store.dispatch("edge-app/setAppName",t)},deleteApp:function(){var t=this;this.$store.dispatch("edge-app/deleteApp").then((function(e){Object(l["Message"])({message:"删除应用成功",type:"success",duration:5e3}),t.dialogVisible=!1,t.getList()}))},handleClose:function(t){this.$confirm("确认删除？").then((function(e){t()})).catch((function(t){}))},getList:function(){var t=this;this.$store.dispatch("edge-app/getAppList").then((function(e){var a=[];e.forEach((function(t,e){var i=[];t.spec.containers.forEach((function(t,e){i.push(t.image)})),a.push({name:t.metadata.name,createTime:t.metadata.creation_timestamp,labels:t.metadata.labels,images:i,node:t.spec.node_name,status:"Running"===t.status.phase?0:1})})),t.list=a}))}}},r=o,c=a("2877"),u=Object(c["a"])(r,i,n,!1,null,"8e8ce9ba",null);e["default"]=u.exports},e9c4:function(t,e,a){var i=a("23e7"),n=a("d066"),s=a("d039"),l=n("JSON","stringify"),o=/[\uD800-\uDFFF]/g,r=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,u=function(t,e,a){var i=a.charAt(e-1),n=a.charAt(e+1);return r.test(t)&&!c.test(n)||c.test(t)&&!r.test(i)?"\\u"+t.charCodeAt(0).toString(16):t},d=s((function(){return'"\\udf06\\ud834"'!==l("\udf06\ud834")||'"\\udead"'!==l("\udead")}));l&&i({target:"JSON",stat:!0,forced:d},{stringify:function(t,e,a){var i=l.apply(null,arguments);return"string"==typeof i?i.replace(o,u):i}})}}]);